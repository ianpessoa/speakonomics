<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Simulador de Taxa de Câmbio</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f9;
      margin: 0;
      padding: 20px;
      color: #333;
    }

    h2 {
      text-align: center;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .slider-container {
      margin: 20px 0;
      text-align: center;
    }

    input[type="range"] {
      width: 70%;
    }

    .info {
      text-align: center;
      margin-bottom: 20px;
    }

    canvas {
      width: 100% !important;
      max-height: 400px;
    }

    .explanation {
      text-align: center;
      font-style: italic;
      margin-top: 10px;
      color: #555;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Taxa de Câmbio e Balança Comercial</h2>

    <p>
      Ajuste a <b>taxa de câmbio</b> e observe como as <b>exportações</b>, <b>importações</b> e o <b>saldo comercial</b> reagem.
      Quando a moeda se <b>desvaloriza</b> (câmbio ↑), exportar fica mais vantajoso.
    </p>

    <div class="slider-container">
      <span>Moeda valorizada</span>
      <input type="range" id="cambioSlider" min="3" max="7" step="0.1" value="5">
      <span>Moeda desvalorizada</span>
      <div class="info" id="info"></div>
    </div>

    <canvas id="chart"></canvas>
    <div class="explanation" id="explanation"></div>
  </div>

  <script>
    const ctx = document.getElementById("chart").getContext("2d");
    const fundamental = 5.0; // taxa de câmbio de equilíbrio
    let cambio = fundamental;

    // Funções econômicas simples
    function exportacoes(r) {
      return 100 + (r - fundamental) * 20; // desvalorização -> sobe
    }
    function importacoes(r) {
      return 100 - (r - fundamental) * 25; // desvalorização -> cai
    }
    function saldo(r) {
      return exportacoes(r) - importacoes(r);
    }

    // Gera os dados do gráfico
    function gerarDados() {
      const data = [];
      for (let r = 3; r <= 7; r += 0.2) {
        data.push({
          x: r.toFixed(1),
          exp: exportacoes(r),
          imp: importacoes(r),
          sld: saldo(r)
        });
      }
      return data;
    }

    const dados = gerarDados();

    const chart = new Chart(ctx, {
      type: "line",
      data: {
        labels: dados.map(d => d.x),
        datasets: [
          {
            label: "Exportações",
            data: dados.map(d => d.exp),
            borderColor: "#2563eb",
            tension: 0.2,
            borderWidth: 2,
            fill: false
          },
          {
            label: "Importações",
            data: dados.map(d => d.imp),
            borderColor: "#dc2626",
            tension: 0.2,
            borderWidth: 2,
            fill: false
          },
          {
            label: "Saldo Comercial",
            data: dados.map(d => d.sld),
            borderColor: "#16a34a",
            tension: 0.2,
            borderWidth: 2,
            fill: false
          }
        ]
      },
      options: {
        scales: {
          x: {
            title: { display: true, text: "Taxa de câmbio (R$/US$)" }
          },
          y: {
            title: { display: true, text: "Índice (base 100)" }
          }
        },
        plugins: {
          legend: { position: "bottom" }
        }
      }
    });

    const slider = document.getElementById("cambioSlider");
    const info = document.getElementById("info");
    const explanation = document.getElementById("explanation");

    function atualizarInterface() {
      cambio = parseFloat(slider.value);
      const exp = exportacoes(cambio);
      const imp = importacoes(cambio);
      const sld = saldo(cambio);

      info.innerHTML = `
        <b>Câmbio atual:</b> R$ ${cambio.toFixed(2)} / US$ |
        <b>Exportações:</b> ${exp.toFixed(1)} |
        <b>Importações:</b> ${imp.toFixed(1)} |
        <b>Saldo:</b> ${sld.toFixed(1)}
      `;

      // Feedback textual
      if (cambio > fundamental + 0.2) {
        explanation.textContent = "A moeda se desvalorizou: exportar ficou mais vantajoso, importações caíram.";
      } else if (cambio < fundamental - 0.2) {
        explanation.textContent = "A moeda se valorizou: exportar ficou mais difícil, importações aumentaram.";
      } else {
        explanation.textContent = "A taxa de câmbio está próxima do equilíbrio.";
      }
    }

    slider.addEventListener("input", atualizarInterface);
    atualizarInterface();
  </script>
</body>
</html>
