<html lang="pt-BR">


function supply(q, shift) {
return 1*q + shift; // Oferta: P = q + shift
}


function demand(q, shift) {
return -1*q + 10 + shift; // Demanda: P = -q + 10 + shift
}


function findEquilibrium(shiftS, shiftD) {
const q = (10 + shiftD - shiftS) / 2; // resolver: q+shiftS = -q+10+shiftD
const p = supply(q, shiftS);
return { q, p };
}


let shiftS = 0, shiftD = 0;


const data = {
labels: Array.from({ length: 11 }, (_, i) => i),
datasets: [
{
label: 'Demanda', borderColor: 'blue', data: [], fill: false, tension: 0
},
{
label: 'Oferta', borderColor: 'red', data: [], fill: false, tension: 0
}
]
};


const config = {
type: 'line', data, options: { responsive: true, maintainAspectRatio: false }
};


const chart = new Chart(ctx, config);


function updateChart() {
const qValues = data.labels;
chart.data.datasets[0].data = qValues.map(q => demand(q, shiftD));
chart.data.datasets[1].data = qValues.map(q => supply(q, shiftS));


const eq = findEquilibrium(shiftS, shiftD);
document.getElementById('eqPrice').textContent = eq.p.toFixed(2);
document.getElementById('eqQty').textContent = eq.q.toFixed(2);


chart.update();
}


updateChart();


document.getElementById('shiftSupply').addEventListener('input', (e) => {
shiftS = parseFloat(e.target.value);
updateChart();
});


document.getElementById('shiftDemand').addEventListener('input', (e) => {
shiftD = parseFloat(e.target.value);
updateChart();
});
</script>
</body>
</html>
